package com.example.combineddemo;

import android.app.DatePickerDialog;
import android.app.TimePickerDialog;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

import com.google.android.material.floatingactionbutton.FloatingActionButton;

import java.util.Calendar;

public class MainActivity extends AppCompatActivity {

    Button dateBtn, timeBtn, progressBtn;
    TextView resultTv;
    ProgressBar progressBar;
    FloatingActionButton fab;

    Calendar calendar;
    int progressStatus = 0;
    Handler handler = new Handler();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Initialize views
        dateBtn = findViewById(R.id.dateBtn);
        timeBtn = findViewById(R.id.timeBtn);
        progressBtn = findViewById(R.id.progressBtn);
        resultTv = findViewById(R.id.resultTv);
        progressBar = findViewById(R.id.progressBar);
        fab = findViewById(R.id.fab);

        calendar = Calendar.getInstance();

        // Date Picker
        dateBtn.setOnClickListener(v -> {
            int year = calendar.get(Calendar.YEAR);
            int month = calendar.get(Calendar.MONTH);
            int day = calendar.get(Calendar.DAY_OF_MONTH);

            DatePickerDialog dpd = new DatePickerDialog(MainActivity.this,
                    (view, year1, month1, dayOfMonth) ->
                            resultTv.setText("Date: " + dayOfMonth + "/" + (month1 + 1) + "/" + year1),
                    year, month, day);
            dpd.show();
        });

        // Time Picker
        timeBtn.setOnClickListener(v -> {
            int hour = calendar.get(Calendar.HOUR_OF_DAY);
            int minute = calendar.get(Calendar.MINUTE);

            TimePickerDialog tpd = new TimePickerDialog(MainActivity.this,
                    (view, hourOfDay, minute1) ->
                            resultTv.setText("Time: " + hourOfDay + ":" + minute1),
                    hour, minute, true);
            tpd.show();
        });

        // ProgressBar
        progressBtn.setOnClickListener(v -> {
            progressStatus = 0;
            progressBar.setProgress(progressStatus);

            new Thread(() -> {
                while (progressStatus < 100) {
                    progressStatus += 1;

                    handler.post(() -> progressBar.setProgress(progressStatus));

                    try {
                        Thread.sleep(50);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }).start();
        });

        // Floating Action Button
        fab.setOnClickListener(v -> 
                Toast.makeText(MainActivity.this, "FAB Clicked!", Toast.LENGTH_SHORT).show());
    }
}


<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="20dp">

    <LinearLayout
        android:id="@+id/linearLayout"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:layout_centerInParent="true">

        <Button
            android:id="@+id/dateBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Pick Date" />

        <Button
            android:id="@+id/timeBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Pick Time"
            android:layout_marginTop="10dp" />

        <Button
            android:id="@+id/progressBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Start Progress"
            android:layout_marginTop="10dp" />

        <ProgressBar
            android:id="@+id/progressBar"
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            android:max="100"
            android:progress="0"
            android:layout_marginTop="15dp"/>

        <TextView
            android:id="@+id/resultTv"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Result will appear here"
            android:layout_marginTop="20dp"/>
    </LinearLayout>

    <!-- Floating Action Button at Bottom-Right -->
    <com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id="@+id/fab"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:srcCompat="@android:drawable/ic_input_add"
        android:contentDescription="FAB"
        android:layout_alignParentBottom="true"
        android:layout_alignParentEnd="true"
        android:layout_margin="16dp"/>
</RelativeLayout>
